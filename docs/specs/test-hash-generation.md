# spec://test/hash-generation

## –¢–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ö—ç—à–µ–π

**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: stable  
**–ú–æ–¥—É–ª—å**: `tests/test_hash_generation.py`

---

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `generate_record_hash()` –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ç–∞–±–ª–∏—Ü.

---

## –ü–æ–∫—Ä—ã—Ç–∏–µ

### Tag

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_tag_same_name_same_type` | –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ç–µ–≥–∏ ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à |
| `test_tag_different_name` | –†–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞ ‚Üí —Ä–∞–∑–Ω—ã–µ —Ö—ç—à–∏ |
| `test_tag_different_type` | –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã ‚Üí —Ä–∞–∑–Ω—ã–µ —Ö—ç—à–∏ |
| `test_tag_empty_name` | –ü—É—Å—Ç–æ–µ –∏–º—è ‚Üí —Ö—ç—à –±–µ–∑ –æ—à–∏–±–æ–∫ |
| `test_tag_none_values` | None –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí —Ö—ç—à –±–µ–∑ –æ—à–∏–±–æ–∫ |

---

### UserMark

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_usermark_with_guid` | –û–¥–∏–Ω–∞–∫–æ–≤—ã–π GUID ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à |
| `test_usermark_without_guid` | –ù–µ—Ç GUID ‚Üí —Ö—ç—à –ø–æ –¥—Ä—É–≥–∏–º –ø–æ–ª—è–º |

---

### Location

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_location_same_fields` | –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ–ª—è ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à |

---

### Note

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_not_same_content` | –û–¥–∏–Ω–∞–∫–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à |
| `test_not_different_content` | –†–∞–∑–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ‚Üí —Ä–∞–∑–Ω—ã–µ —Ö—ç—à–∏ |

---

### Bookmark

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_bookmark_same_fields` | –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ–ª—è ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à |

---

### TagMap

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_tagmap_same_fields` | –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ–ª—è ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à |

---

### BlockRange

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_blockrange_same_fields` | –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ–ª—è ‚Üí –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à |

---

### –û–±—â–∏–µ

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `test_unknown_table` | –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ ‚Üí –æ–±—â–∏–π –º–µ—Ç–æ–¥ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è |

---

## –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ (TODO)

### 1. –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –∫–æ–ª–ª–∏–∑–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ —Ä–∞–∑–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –Ω–µ –¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à.

**–†–µ—à–µ–Ω–∏–µ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)**:
```python
def test_no_collision_different_records():
    """–†–∞–∑–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ö—ç—à"""
    data1 = {'Name': 'Test1', 'Type': 1}
    data2 = {'Name': 'Test2', 'Type': 1}
    assert generate_record_hash('Tag', data1) != generate_record_hash('Tag', data2)
```

### 2. –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –±–æ–ª—å—à–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏, unicode.

**–†–µ—à–µ–Ω–∏–µ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)**:
```python
def test_tag_unicode_name():
    """–¢–µ–≥ —Å unicode –∏–º–µ–Ω–µ–º"""
    data = {'Name': '–¢–µ–≥üéâ', 'Type': 1}
    hash_result = generate_record_hash('Tag', data)
    assert isinstance(hash_result, str)
    assert len(hash_result) == 64
```

---

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
pytest tests/test_hash_generation.py -v
```

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|--------|------|-----------|
| 1.0 | 2026-02-26 | Initial spec |
